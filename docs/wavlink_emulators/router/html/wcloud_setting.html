<div class="page-content row">
    <div class="col-xs-9 content" id="wcloud_setting">
        <div class="form-group row">
            <label class="col-xs-8 control-label" data-i18n="lblWcloudOnOff"></label>
            <div class="col-xs-4 text-right">
                <div class="switch">
                    <input class="switch-checkbox hidden" id="enableWcloud" type="checkbox">
                    <label class="switch-label" for="enableWcloud">
                        <span class="switch-inner"></span>
                    </label>
                </div>
            </div>
        </div>
        <div class="form-group row">
            <label class="col-xs-7 control-label" data-i18n="lblDdnsStatus"></label>
            <div class="col-xs-5 text-right" id="wcloudConnect" ></div>
        </div>
        <div class="form-group row">
            <div class="col-xs-4 col-xs-offset-4">
                <button class="btn btn-primary theme-bg-color" id="setWcloud" data-i18n="btnSaveName"></button>
            </div>
        </div>
        <hr class="depart-line">
        <div class="off" id="AppDown">
            <span data-i18n="msgapp"></span>
            <span id="downloadApp" class="theme-color" data-i18n="lblAppDw"></span>
        </div>
    </div>
    <div class="col-xs-3 help">
        <h4 data-i18n="lblHelp"></h4>
        <p data-i18n="lblWcloudTip"></p>
    </div>
</div>

<div class="modal" id="appModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header theme-border-color">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" data-i18n="lbldown"></h4>
            </div>
            <div class="modal-body text-center">
                <img src="../img/app_down.png" width="350px">
            </div>
        </div>
    </div>
</div>

<script>
    try{
        $;
    }catch(e){
        window.sessionStorage.setItem("page", "/setting/wcloud_setting.html");
        window.location.replace("./index.html");
    }

    $(document).ready(function(){
        getWcloudStatus();
        $("#setWcloud").on("click", function(){
            startLoading(2000, $.t("btnSaveName"));
        });

        $("#downloadApp").on("click", function(){
            $("#appModal").modal("show");
        });

        function getWcloudStatus() {
            $.when(ajax({url: "network.json"}),ajax({url: "system.json"})).done(function(r0, r1){
                if (r0[0].error == 0 && r1[0].error == 0) {
                    var wcloud = r0[0].wcloud;
                    $("#enableWcloud").prop("checked", wcloud.app == 1).change();
                    $("#wcloudConnect").text($.t(wcloud.connect ? "lblOnline" : "lblOffline"));
                    r1[0].sys.brand=="WAVLINK" ? $("#AppDown").show() : $("#AppDown").hide();
                }
            });
        }
    });
</script>
