<div class="page-content row">
    <div class="col-xs-9 content" id="aiQoe">
        <div class="form-group row">
            <label class="col-xs-4 control-label" data-i18n="lblEnableAIQos"></label>
            <div class="col-xs-5">
                <div class="switch">
                    <input class="switch-checkbox hidden" id="enableQoe" type="checkbox">
                    <label class="switch-label" for="enableQoe">
                        <span class="switch-inner"></span>
                    </label>
                </div>
            </div>
        </div>
        <div class="form-group row">
            <label class="col-xs-4 control-label" data-i18n="lblModeSeclection"></label>
            <div class="col-xs-8">
                <div class="radio">
                    <input type="radio" name="profile" value="ai" id="profile0">
                    <label for="profile0" data-i18n="lblAIMode"></label>
                </div>
                <div class="radio">
                    <input type="radio" name="profile" value="gaming" id="profile1">
                    <label for="profile1" data-i18n="lblGameMode"></label>
                </div>
                <div class="radio">
                    <input type="radio" name="profile" value="streaming" id="profile2">
                    <label for="profile2" data-i18n="lblVideoMode"></label>
                </div>
                <div class="radio">
                    <input type="radio" name="profile" value="office" id="profile3">
                    <label for="profile3" data-i18n="lblOfficeMode"></label>
                </div>
                <div class="radio">
                    <input type="radio" name="profile" value="wfh" id="profile4">
                    <label for="profile4" data-i18n="lblHomeMode"></label>
                </div>
            </div>
        </div>
        <div class="form-group row">
            <label class="col-xs-4 control-label" data-i18n="lblSensitivity"></label>
            <div class="col-xs-5">
                <select class="form-control" id="sensitivity">
                    <option value="-10">-10</option>
                    <option value="-9">-9</option>
                    <option value="-8">-8</option>
                    <option value="-7">-7</option>
                    <option value="-6">-6</option>
                    <option value="-5">-5</option>
                    <option value="-4">-4</option>
                    <option value="-3">-3</option>
                    <option value="-2">-2</option>
                    <option value="-1">-1</option>
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                </select>
            </div>
        </div>
        <div class="form-group row">
            <label class="col-xs-4 control-label" data-i18n="lblIntensity"></label>
            <div class="col-xs-5">
                <select class="form-control" id="intensity">
                    <option value="-10">-10</option>
                    <option value="-9">-9</option>
                    <option value="-8">-8</option>
                    <option value="-7">-7</option>
                    <option value="-6">-6</option>
                    <option value="-5">-5</option>
                    <option value="-4">-4</option>
                    <option value="-3">-3</option>
                    <option value="-2">-2</option>
                    <option value="-1">-1</option>
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                </select>
            </div>
        </div>
        <div class="form-group row">
            <label class="col-xs-4 control-label" data-i18n="lblCurrentVersion"></label>
            <div class="col-xs-5" id="version"></div>
        </div>
        <div class="row">
            <div class="col-xs-4 col-xs-offset-2">
                <button class="btn btn-primary theme-bg-color" id="setQos" data-i18n="btnSaveName"></button>
            </div>
            <div class="col-xs-4">
                <button class="btn btn-primary theme-bg-color" id="resetQos" data-i18n="btnReset"></button>
            </div>
        </div>
    </div>
    <div class="col-xs-3 help">
        <h4 data-i18n="lblHelp"></h4>
        <h5>AI QoE</h5>
        <p></p>
        <h5 data-i18n="lblAIMode"></h5>
        <p></p>
        <h5 data-i18n="lblGameMode"></h5>
        <p></p>
        <h5 data-i18n="lblVideoMode"></h5>
        <p></p>
        <h5 data-i18n="lblOfficeMode"></h5>
        <p></p>
        <h5 data-i18n="lblHomeMode"></h5>
        <p></p>
        <h5 data-i18n="lblSensitivity"></h5>
        <p></p>
        <h5 data-i18n="lblIntensity"></h5>
        <p></p>
    </div>
</div>

<script>
    try{
        $;
    }catch(e){
        window.sessionStorage.setItem("page", "/setting/aiqoe.html");
        window.location.replace("./index.html");
    }
    $(document).ready(function(){
        var array = [[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]];
        var ark_status = 0;

        getQoe();

        $('input[name="profile"]').on('change',function() {
            var selectedValue = $('input[name="profile"]:checked').val();
            handleSetArray(selectedValue);
        });
        $("#sensitivity, #intensity").on("blur", function(){
            var selectedValue = $('input[name="profile"]:checked').val();
            var sensitivity = $("#sensitivity").val();
            var intensity = $("#intensity").val();
            handleGetArray(selectedValue,sensitivity,intensity);
        });
        $("#resetQos").on("click", function(){
            var selectedValue = $('input[name="profile"]:checked').val();
            handleGetArray(selectedValue,0,0);
            $("#sensitivity, #intensity").val(0);
        });
        $("#setQos").on("click", function(){
            if (ark_status == 0) {
                getMsg($.t("msgErrorAiQoe2"));
                return false;
            }
            startLoading(2000, $.t("btnSaveName"));
        });

        function getQoe() {
            ajax({
                url: "ai.json",
                success: function(data){
                    if (data.error == 0) {
                        var qoe = data.qoe;
                        ark_status = data.ark_status;
                        array = qoe.string;
                        if (ark_status == 0) {
                            getMsg($.t("msgErrorAiQoe1"));
                        }
                        $("#enableQoe").prop("checked", qoe.enable == 1).change();
                        handleSetArray(qoe.mode);
                        $('input[value="' + qoe.mode + '"]').click();
                        $("#version").text(qoe.version);
                    } else {
                        locationUrl(data.error);
                    }
                }
            });
        }

        // function setQoe(enable,mode,string) {
        //     ajax({
        //         data: "fname=net&opt=ai_qoe&function=set&qoe_enable="+enable+"&mode="+mode+"&string="+string,
        //         beforeSend: function(){
        //             startLoading(2000, $.t("btnSaveName"));
        //         }
        //     });
        // }

        function handleSetArray(mode) {
            switch(mode) {
                case 'ai':
                    $("#sensitivity").val(array[1][0]);
                    $("#intensity").val(array[1][1]);
                    break;
                case 'gaming':
                    $("#sensitivity").val(array[2][0]);
                    $("#intensity").val(array[2][1]);
                    break;
                case 'streaming':
                    $("#sensitivity").val(array[3][0]);
                    $("#intensity").val(array[3][1]);
                    break;
                case 'office':
                    $("#sensitivity").val(array[4][0]);
                    $("#intensity").val(array[4][1]);
                    break;
                case 'wfh':
                    $("#sensitivity").val(array[5][0]);
                    $("#intensity").val(array[5][1]);
                    break;
            }
        }

        function handleGetArray(mode,sensitivity,intensity) {
            switch(mode) {
                case 'ai':
                    array[1] = [parseInt(sensitivity),parseInt(intensity)];
                    break;
                case 'gaming':
                    array[2] = [parseInt(sensitivity),parseInt(intensity)];
                    break;
                case 'streaming':
                    array[3] = [parseInt(sensitivity),parseInt(intensity)];
                    break;
                case 'office':
                    array[4] = [parseInt(sensitivity),parseInt(intensity)];
                    break;
                case 'wfh':
                    array[5] = [parseInt(sensitivity),parseInt(intensity)];
                    break;
            }
        }
    });
</script>
